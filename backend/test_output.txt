============================= test session starts =============================
platform win32 -- Python 3.10.18, pytest-9.0.1, pluggy-1.6.0
rootdir: C:\Projects\eric-bach\youtube-summarizer\backend
configfile: pyproject.toml
plugins: anyio-4.12.0
collected 3 items

tests\test_youtube_service.py .F.                                        [100%]

================================== FAILURES ===================================
________________________ test_fetch_transcript_success ________________________

mock_api = <MagicMock name='YouTubeTranscriptApi' id='2324949952416'>

    @patch("app.services.youtube.YouTubeTranscriptApi")
    def test_fetch_transcript_success(mock_api):
        # Mock return value
        mock_api.get_transcript.return_value = [
            {"text": "Never gonna give you up", "start": 0.0, "duration": 2.0},
            {"text": "Never gonna let you down", "start": 2.0, "duration": 2.0}
        ]
    
        url = "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
        result = fetch_transcript(url)
    
>       assert "Never gonna give you up" in result
E       assert 'Never gonna give you up' in "Error fetching transcript: 'dict' object has no attribute 'text'"

tests\test_youtube_service.py:28: AssertionError
=========================== short test summary info ===========================
FAILED tests/test_youtube_service.py::test_fetch_transcript_success - assert ...
========================= 1 failed, 2 passed in 0.30s =========================
